{% extends 'layout_admin.html.twig' %}


{% block title %}Liste des Commandes
{% endblock %}

{% block monTitre %}Liste des Commandes
{% endblock %}
{% block body %}
	<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
		<symbol id="check-circle-fill" fill="currentColor" viewbox="0 0 16 16">
			<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
		</symbol>
	</svg>
	<div class="col-10">
		{% for message in app.flashes('success') %}
			<div class="alert alert-success alert-dismissible fade show fixed-bottom text-center" role="alert">
				<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
				{{message}}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		{% endfor %}

		<div>
			Catalogue / Commandes

			<h2>Commandes</h2>
		</div>
		<ul class="nav justify-content-end">
			<li class="nav-item p-2">
				<a class="nav-link btn btn-secondary text-white" href="#">Module recommandé</a>
			</li>
			<li class="nav-item p-2">
				<a class="nav-link btn btn-secondary text-white" href="#">Aide</a>
			</li>
			<li>
				<a class="nav-link link-light" href="{{path('admin_user_export_excel')}}">
					<button class="btn btn-primary " type="submit">
						<span class="fa fa-fw fa-file-code-o"></span>
						Exporter
					</button>
				</a>
			</li>
		</ul>
		<table class="table table-perso">
			<thead>
				<tr>
					<th scope="col">ID</th>
					<th scope="col">Produits</th>
					<th scope="col">Quantite</th>
					<th scope="col">Total</th>
					<th scope="col">Transporteur</th>
					<th scope="col">Commande fait le :</th>
					<th scope="col">Destination</th>
					<th scope="col">Paye</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for commandedetails in commandedetails|reverse %}
					<tr>
						<th>{{commandedetails.id}}</th>
						<th>{{commandedetails.produits}}</th>
						<th>{{commandedetails.quantite}}</th>
						<th>{{commandedetails.total}}</th>
						<th>{{commandedetails.maCommande.transporteurNom}}
							-
							{{commandedetails.maCommande.transporteurPrix}}€</th>
						<th>{{commandedetails.maCommande.createdAt|date("m/d/Y")}}</th>
						<th>{{commandedetails.maCommande.livraison|raw}}</th>
						<th>
							<a href="{{path('paddPaye',{'id': commandedetails.id})}}">
								{{ commandedetails.maCommande.isPaye ? '<i class="fas fa-check text-success p-2"></i>' : '<i class="fas fa-times text-danger p-2"></i>' }}
							</a>
						</th>
						<td>
							<div class="row">
								<div class="col-6">
									<a href="{{path('showCommande',{'id' : commandedetails.id})}}">
										<button class="btn text-primary">
											<i class="fa-solid fa-eye"></i>
										</button>
									</a>
								</div>
								<div class="col-6">
									<form method="post" action="{{path('supCommande',{'id' : commandedetails.id})}}" onsubmit="return confirm('Voulez-vous vraiment supprimer')">
										<input type="hidden" name="_method" value="SUP">
										<input type="hidden" name="_token" value="{{csrf_token('SUP' ~ commandedetails.id)}}">
										<button type="submit" class="btn text-danger">
											<i class="fa-solid fa-trash-can"></i>
										</button>
									</form>
								</div>
							</div>
						</td>
					</tr>
				</td>
			{% endfor %}
		</tbody>
	</table>
</div>{% endblock %}
