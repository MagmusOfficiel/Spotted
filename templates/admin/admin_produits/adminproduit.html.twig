{% extends 'layout_admin.html.twig' %}


{% block title %}Liste des produits
{% endblock %}

{% block monTitre %}Liste des produits
{% endblock %}
{% block body %}
	<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
		<symbol id="check-circle-fill" fill="currentColor" viewbox="0 0 16 16">
			<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
		</symbol>
	</svg>
	<div class="col-10">
		{% for message in app.flashes('success') %}
			<div class="alert alert-success alert-dismissible fade show fixed-bottom text-center" role="alert">
				<svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
				{{message}}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		{% endfor %}
		<div>				
			Catalogue / Produits

			<h2>Produits</h2>
		</div>
		<ul class="nav justify-content-end">
			<li class="nav-item p-2">
				<a class="nav-link btn btn-info text-white" aria-current="page" href="{{path('creationProduit')}}">
					<i class="fas fa-plus-circle align-middle"></i>&nbsp;&nbsp;Nouveau produit</a>
			</li>
			<li class="nav-item p-2">
				<a class="nav-link btn btn-secondary text-white" href="#">Module recommandé</a>
			</li>
			<li class="nav-item p-2">
				<a class="nav-link btn btn-secondary text-white" href="#">Aide</a>
			</li>
		</ul>
		<table class="table table-perso">
			<thead>
				<tr>
					<th scope="col">ID</th>
					<th scope="col">Image</th>
					<th scope="col">Image 2</th>
					<th scope="col">Nom</th>
					<th scope="col">Référence</th>
					<th scope="col">Catégorie</th>
					<th scope="col">Montant HT</th>
					<th scope="col">Quantité</th>
					<th scope="col">Etat</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for produit in produits %}
					<tr>
						<th>{{produit.id}}</th>
						<td><img src="{{asset('build/images/theme/produit/'~ produit.produitImages[0].imageName[0:4])}}/{{produit.produitImages[0].imageName}}" class="img-fluid" width="200"></td>
 						<td><img src="{{asset('build/images/theme/produit/'~ produit.produitImages[1].imageName[0:4])}}/{{produit.produitImages[1].imageName}}" class="img-fluid" width="200"></td>
						<td>{{produit.produitLibelle}}</td>
						<td>{{produit.produitRef}}</td>
						<td>{{produit.categorie.CatNom}}</td>
						<td>{{produit.produitPrix}}€</td>
						<td>{{produit.produitStock}}</td>
						{% if produit.produitBloque == '0' %}
						<td><a href="{{path('caddBloque',{'id': produit.id})}}"><i class="fas fa-check text-success p-2"></i></a></td>
						{% else %}
						<td><a href="{{path('caddBloque',{'id': produit.id})}}"><i class="fas fa-times text-danger p-2"></i></a></td>
						{% endif %}
						<td>
							<a href="{{path('modifProduit',{'id' : produit.id})}}" class="col btn btn-warning">Modifier</a>
							<form method="post" class="col" action="{{path('supProduit',{'id' : produit.id})}}" onsubmit="return confirm('Voulez-vous vraiment supprimer')">
								<input type="hidden" name="_method" value="SUP">
								<input type="hidden" name="_token" value="{{csrf_token('SUP' ~ produit.id)}}">
								<input type="submit" class="col btn btn-danger" value="supprimer">
							</form>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
</div>
{% endblock %}
